$.getJSON("data/2015/art-ross.json",function(t){var e=t.benn,s=$.map(e,function(t){return[[t.point_total]]}),n=$.map(e,function(t){return[[t.goal_total]]}),o=$.map(e,function(t){return[[t.assist_total]]}),a=(o=$.map(e,function(t){return[[t.assist_total]]}),$.map(e,function(t){return[[t.game_no]]})),l=$.map(e,function(t){return[[t.plusminus_total]]}),r=$.map(e,function(t){return[[t.shots_total]]});gamesNHL=a.slice(0,83),ptsBenn=s.slice(0,83),goalsBenn=n.slice(0,83),assistsBenn=o.slice(0,83),plusminusBenn=l.slice(0,83),shotsBenn=r.slice(0,83),ptsBenn.unshift("Benn"),goalsBenn.unshift("Benn goals"),assistsBenn.unshift("Benn assists"),plusminusBenn.unshift("Benn plus minus"),shotsBenn.unshift("Benn shots"),gamesNHL.unshift("gameno");var i=t.tavares;s=$.map(i,function(t){return[[t.point_total]]}),n=$.map(i,function(t){return[[t.goal_total]]}),o=$.map(i,function(t){return[[t.assist_total]]}),l=$.map(i,function(t){return[[t.plusminus_total]]}),r=$.map(i,function(t){return[[t.shots_total]]});ptsTavares=s.slice(0,83),goalsTavares=n.slice(0,83),assistsTavares=o.slice(0,83),plusminusTavares=l.slice(0,83),shotsTavares=r.slice(0,83),ptsTavares.unshift("Tavares"),goalsTavares.unshift("Tavares goals"),assistsTavares.unshift("Tavares assists"),shotsTavares.unshift("Tavares shots"),plusminusTavares.unshift("Tavares plusminus");var c=t.crosby;s=$.map(c,function(t){return[[t.point_total]]}),n=$.map(c,function(t){return[[t.goal_total]]}),o=$.map(c,function(t){return[[t.assist_total]]}),l=$.map(c,function(t){return[[t.plusminus_total]]}),r=$.map(c,function(t){return[[t.shots_total]]});ptsCrosby=s.slice(0,83),goalsCrosby=n.slice(0,83),assistsCrosby=o.slice(0,83),plusminusCrosby=l.slice(0,83),shotsCrosby=r.slice(0,83),ptsCrosby.unshift("Crosby"),goalsCrosby.unshift("Crosby goals"),assistsCrosby.unshift("Crosby assists"),plusminusCrosby.unshift("Crosby plusminus"),shotsCrosby.unshift("Crosby shots");var u=t.ovechkin;s=$.map(u,function(t){return[[t.point_total]]}),n=$.map(u,function(t){return[[t.goal_total]]}),o=$.map(u,function(t){return[[t.assist_total]]}),l=$.map(u,function(t){return[[t.plusminus_total]]}),r=$.map(u,function(t){return[[t.shots_total]]});ptsOvechkin=s.slice(0,83),goalsOvechkin=n.slice(0,83),assistsOvechkin=o.slice(0,83),plusminusOvechkin=l.slice(0,83),shotsOvechkin=r.slice(0,83),ptsOvechkin.unshift("Ovechkin"),goalsOvechkin.unshift("Ovechkin goals"),assistsOvechkin.unshift("Ovechkin assists"),plusminusOvechkin.unshift("Ovechkin plusminus"),shotsOvechkin.unshift("Ovechkin shots");var p=t.voracek;s=$.map(p,function(t){return[[t.point_total]]}),n=$.map(p,function(t){return[[t.goal_total]]}),o=$.map(p,function(t){return[[t.assist_total]]}),o=$.map(p,function(t){return[[t.assist_total]]}),a=$.map(p,function(t){return[[t.game_no]]}),l=$.map(p,function(t){return[[t.plusminus_total]]}),r=$.map(p,function(t){return[[t.shots_total]]});ptsVoracek=s.slice(0,83),goalsVoracek=n.slice(0,83),assistsVoracek=o.slice(0,83),plusminusVoracek=l.slice(0,83),shotsVoracek=r.slice(0,83),ptsVoracek.unshift("Voracek"),goalsVoracek.unshift("Voracek goals"),assistsVoracek.unshift("Voracek assists"),plusminusVoracek.unshift("Voracek plus minus"),shotsVoracek.unshift("Voracek shots");var v=c3.generate({bindto:"#tpoints",size:{height:600},data:{x:"gameno",columns:[gamesNHL,ptsBenn,ptsTavares,ptsCrosby,ptsOvechkin,ptsVoracek],axes:{},types:{ptsBenn:"line",ptsTavares:"line",ptsCrosby:"line",ptsOvechkin:"line",ptsVoracek:"line"},labels:{format:function(t){return t}}},axis:{x:{type:"categories",label:{text:"Games",position:"inner-center"},tick:{count:82}},y:{label:{text:"Points",position:"outer-middle"}}},grid:{x:{lines:[{value:11,text:"November"},{value:25,text:"December"},{value:38,text:"January"},{value:50,text:"February"},{value:62,text:"March"},{value:77,text:"April"}]}},tooltip:{contents:function(t,e,s,a){var n,o,l,r,i,c,u=this,p=u.config,v=p.tooltip_format_title||e,m=p.tooltip_format_name||function(t){return t},g=p.tooltip_format_value||s,h=1;for(o=0;o<t.length;o++)t[o]&&(t[o].value||0===t[o].value)&&(n||t.sort(function(t,e){return t.value-e.value}).reverse(),n||(l=v?v(t[o].x):t[o].x,n="<table class='"+u.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='3'>Game "+l+"</th></tr>":"")),i=m(t[o].name),r=g(t[o].value,t[o].ratio,t[o].id,t[o].index),c=u.levelColor?u.levelColor(t[o].value):a(t[o].id),n+="<tr class='"+u.CLASS.tooltipName+"-"+t[o].id+"'>",n+="<td class='no'>#"+h+++"</td>",n+="<td class='name'><span style='background-color:"+c+"'></span>"+i+"</td>",n+="<td class='value'>"+r+"</td>",n+="</tr>");return n+"</table>"}},point:{show:!1},color:{pattern:["#016F4A","#00539B","#C5B358","#E51837","#F37737"]},line:{connectNull:!1}});d3.select(".ptcontainer").insert("div",".tpoints").attr("class","legend").selectAll("span").data([ptsBenn[0],ptsTavares[0],ptsCrosby[0],ptsOvechkin[0],ptsVoracek[0]]).enter().append("span").attr("data-id",function(t){return t}).html(function(t){return t}).each(function(t){d3.select(this).style("background-color",v.color(t))}).on("mouseover",function(t){var e=t.replace(/\s+/g,"-");console.log(e),d3.select("#tpoints").select("g.c3-chart-text.c3-target.c3-target-"+e).style("opacity",1,"important"),v.focus(t)}).on("mouseout",function(t){var e=t.replace(/\s+/g,"-");d3.select("#tpoints").select("g.c3-chart-text.c3-target.c3-target-"+e).style("opacity",0,"important"),v.revert()}).on("click",function(t){v.toggle(t)}),d3.select(".ptprofile").insert("div",".tpoints").attr("class","legend").selectAll("span").data([ptsBenn[0],ptsTavares[0],ptsCrosby[0],ptsOvechkin[0],ptsVoracek[0]]).enter().append("span").attr("class",function(t){return t}).each(function(t){d3.select(this).style("height","160px").style("background-color",v.color(t))}).on("mouseover",function(t){var e=t.replace(/\s+/g,"-");d3.select("#tpoints").select("g.c3-chart-text.c3-target.c3-target-"+e).style("opacity",1,"important"),v.focus(t)}).on("mouseout",function(t){var e=t.replace(/\s+/g,"-");d3.select("#tpoints").select("g.c3-chart-text.c3-target.c3-target-"+e).style("opacity",0,"important"),v.revert()}).on("click",function(t){v.toggle(t)});c3.generate({bindto:".lmpts",size:{height:600},data:{x:"gameno",columns:[gamesNHL,ptsBenn,ptsTavares,ptsCrosby,ptsOvechkin,ptsVoracek],types:{ptsBenn:"spline",ptsTavares:"spline",ptsCrosby:"spline",ptsOvechkin:"spline",ptsVoracek:"spline"},labels:{format:function(t){return t}}},axis:{x:{type:"categories",label:{text:"Games",position:"inner-center"},min:42},y:{label:{text:"Points",position:"outer-middle"},min:40}},grid:{x:{lines:[{value:11,text:"November"},{value:25,text:"December"},{value:38,text:"January"},{value:50,text:"February"},{value:62,text:"March"},{value:77,text:"April"}]}},tooltip:{contents:function(t,e,s,a){var n,o,l,r,i,c,u=this,p=u.config,v=p.tooltip_format_title||e,m=p.tooltip_format_name||function(t){return t},g=p.tooltip_format_value||s,h=1;for(o=0;o<t.length;o++)t[o]&&(t[o].value||0===t[o].value)&&(n||t.sort(function(t,e){return t.value-e.value}).reverse(),n||(l=v?v(t[o].x):t[o].x,n="<table class='"+u.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='3'>Game "+l+"</th></tr>":"")),i=m(t[o].name),r=g(t[o].value,t[o].ratio,t[o].id,t[o].index),c=u.levelColor?u.levelColor(t[o].value):a(t[o].id),n+="<tr class='"+u.CLASS.tooltipName+"-"+t[o].id+"'>",n+="<td class='no'>#"+h+++"</td>",n+="<td class='name'><span style='background-color:"+c+"'></span>"+i+"</td>",n+="<td class='value'>"+r+"</td>",n+="</tr>");return n+"</table>"}},point:{show:!1},color:{pattern:["#016F4A","#00539B","#C5B358","#E51837","#F37737"]},line:{connectNull:!1}}),n=c3.generate({bindto:"#goals",size:{height:400},data:{x:"gameno",columns:[gamesNHL,goalsBenn,goalsTavares,goalsCrosby,goalsOvechkin,goalsVoracek],axes:{},types:{goalsBenn:"spline",goalsTavares:"spline",goalsCrosby:"spline",goalsOvechkin:"spline",goalsVoracek:"spline"},labels:{format:function(t){return t}}},axis:{x:{type:"categories",label:{text:"Games",position:"outer-center"}},y:{label:{text:"Goals",position:"outer-middle"}}},grid:{x:{lines:[{value:11,text:"November"},{value:25,text:"December"},{value:38,text:"January"},{value:50,text:"February"},{value:62,text:"March"},{value:77,text:"April"}]}},tooltip:{contents:function(t,e,s,a){var n,o,l,r,i,c,u=this,p=u.config,v=p.tooltip_format_title||e,m=p.tooltip_format_name||function(t){return t},g=p.tooltip_format_value||s,h=1;for(o=0;o<t.length;o++)t[o]&&(t[o].value||0===t[o].value)&&(n||t.sort(function(t,e){return t.value-e.value}).reverse(),n||(l=v?v(t[o].x):t[o].x,n="<table class='"+u.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='3'>Game "+l+"</th></tr>":"")),i=m(t[o].name),r=g(t[o].value,t[o].ratio,t[o].id,t[o].index),c=u.levelColor?u.levelColor(t[o].value):a(t[o].id),n+="<tr class='"+u.CLASS.tooltipName+"-"+t[o].id+"'>",n+="<td class='no'>#"+h+++"</td>",n+="<td class='name'><span style='background-color:"+c+"'></span>"+i+"</td>",n+="<td class='value'>"+r+"</td>",n+="</tr>");return n+"</table>"}},point:{show:!1},color:{pattern:["#016F4A","#00539B","#C5B358","#E51837","#F37737"]}});d3.select(".sec2container").insert("div",".goals").attr("class","legend").selectAll("span").data([goalsBenn[0],goalsTavares[0],goalsCrosby[0],goalsOvechkin[0],goalsVoracek[0]]).enter().append("span").attr("data-id",function(t){return t}).html(function(t){return t}).each(function(t){d3.select(this).style("background-color",n.color(t))}).on("mouseover",function(t,e,s){console.log(t,e,s);var a=t.replace(/\s+/g,"-");d3.select("#goals").select("g.c3-chart-text.c3-target.c3-target-"+a).style("opacity",1,"important"),n.focus(t)}).on("mouseout",function(t){var e=t.replace(/\s+/g,"-");d3.select("#goals").select("g.c3-chart-text.c3-target.c3-target-"+e).style("opacity",0,"important"),n.revert()}).on("click",function(t){n.toggle(t)});o=c3.generate({bindto:"#assists",size:{height:400},data:{x:"gameno",columns:[gamesNHL,assistsBenn,assistsTavares,assistsCrosby,assistsOvechkin,assistsVoracek],axes:{},types:{assistsBenn:"line",assistsTavares:"line",assistsCrosby:"line",assistsOvechkin:"line",assistsVoracek:"line"},labels:{format:function(t){return t}}},axis:{x:{type:"categories",label:{text:"Games",position:"inner-center"}},y:{label:{text:"Assists",position:"outer-middle"}}},grid:{x:{lines:[{value:11,text:"November"},{value:25,text:"December"},{value:38,text:"January"},{value:50,text:"February"},{value:62,text:"March"},{value:77,text:"April"}]}},tooltip:{contents:function(t,e,s,a){var n,o,l,r,i,c,u=this,p=u.config,v=p.tooltip_format_title||e,m=p.tooltip_format_name||function(t){return t},g=p.tooltip_format_value||s,h=1;for(o=0;o<t.length;o++)t[o]&&(t[o].value||0===t[o].value)&&(n||t.sort(function(t,e){return t.value-e.value}).reverse(),n||(l=v?v(t[o].x):t[o].x,n="<table class='"+u.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='3'>Game "+l+"</th></tr>":"")),i=m(t[o].name),r=g(t[o].value,t[o].ratio,t[o].id,t[o].index),c=u.levelColor?u.levelColor(t[o].value):a(t[o].id),n+="<tr class='"+u.CLASS.tooltipName+"-"+t[o].id+"'>",n+="<td class='no'>#"+h+++"</td>",n+="<td class='name'><span style='background-color:"+c+"'></span>"+i+"</td>",n+="<td class='value'>"+r+"</td>",n+="</tr>");return n+"</table>"}},point:{show:!1},color:{pattern:["#016F4A","#00539B","#C5B358","#E51837","#F37737"]},line:{connectNull:!1}});d3.select(".assistleg").insert("div",".assists").attr("class","legend").selectAll("span").data([assistsBenn[0],assistsTavares[0],assistsCrosby[0],assistsOvechkin[0],assistsVoracek[0]]).enter().append("span").attr("data-id",function(t){return t}).html(function(t){return t}).each(function(t){d3.select(this).style("background-color",n.color(t))}).on("mouseover",function(t,e,s){var a=t.replace(/\s+/g,"-");d3.select("#assists").select("g.c3-chart-text.c3-target.c3-target-"+a).style("opacity",1,"important"),o.focus(t)}).on("mouseout",function(t){var e=t.replace(/\s+/g,"-");d3.select("#assists").select("g.c3-chart-text.c3-target.c3-target-"+e).style("opacity",0,"important"),o.revert()}).on("click",function(t){o.toggle(t)});c3.generate({bindto:"#goalsassists",size:{height:400},data:{x:"gameno",columns:[gamesNHL,assistsBenn,goalsBenn,assistsTavares,goalsTavares,assistsCrosby,goalsCrosby,assistsOvechkin,goalsOvechkin,assistsVoracek,goalsVoracek],types:{assistsBenn:"line",goalsBenn:"line",assistsTavares:"line",goalsTavares:"line",assistsCrosby:"spline",goalsCrosby:"spline",assistsOvechkin:"line",goalsOvechkin:"spline",assistsVoracek:"line",goalsVoracek:"spline"},regions:{assistsBenn:[{end:82,style:"dashed"}],assistsTavares:[{start:0,end:82,style:"dashed"}],assistsCrosby:[{start:0,end:82,style:"dashed"}],assistsOvechkin:[{end:82,style:"dashed"}]},labels:{format:function(t){return t}}},axis:{x:{type:"categories",label:{text:"Games",position:"inner-center"}},y:{label:{text:"Assists",position:"outer-middle"}}},grid:{x:{lines:[{value:11,text:"November"},{value:25,text:"December"},{value:38,text:"January"},{value:50,text:"February"},{value:62,text:"March"},{value:77,text:"April"}]}},tooltip:{contents:function(t,e,s,a){var n,o,l,r,i,c,u=this,p=u.config,v=p.tooltip_format_title||e,m=p.tooltip_format_name||function(t){return t},g=p.tooltip_format_value||s,h=1;for(o=0;o<t.length;o++)t[o]&&(t[o].value||0===t[o].value)&&(n||t.sort(function(t,e){return t.value-e.value}).reverse(),n||(l=v?v(t[o].x):t[o].x,n="<table class='"+u.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='3'>Game "+l+"</th></tr>":"")),i=m(t[o].name),r=g(t[o].value,t[o].ratio,t[o].id,t[o].index),c=u.levelColor?u.levelColor(t[o].value):a(t[o].id),n+="<tr class='"+u.CLASS.tooltipName+"-"+t[o].id+"'>",n+="<td class='no'>#"+h+++"</td>",n+="<td class='name'><span style='background-color:"+c+"'></span>"+i+"</td>",n+="<td class='value'>"+r+"</td>",n+="</tr>");return n+"</table>"}},point:{show:!1},color:{pattern:["#016F4A","#016F4A","#00539B","#00539B","#C5B358","#C5B358","#E51837","#E51837","#F37737","#F37737"]},line:{connectNull:!1}}),l=c3.generate({bindto:"#plusminus",size:{height:400},data:{x:"gameno",columns:[gamesNHL,plusminusBenn,plusminusTavares,plusminusCrosby,plusminusOvechkin,plusminusVoracek],types:{plusminusBenn:"step",plusminusTavares:"step",plusminusCrosby:"step",plusminusOvechkin:"step",plusminusVoracek:"step"},labels:{format:function(t){return t}}},axis:{x:{type:"categories",label:{text:"Games",position:"outer-center"}},y:{label:{text:"+/- value",position:"outer-middle"}}},grid:{x:{lines:[{value:11,text:"November"},{value:25,text:"December"},{value:38,text:"January"},{value:50,text:"February"},{value:62,text:"March"},{value:77,text:"April"}]},y:{lines:[{value:0}]}},tooltip:{contents:function(t,e,s,a){var n,o,l,r,i,c,u=this,p=u.config,v=p.tooltip_format_title||e,m=p.tooltip_format_name||function(t){return t},g=p.tooltip_format_value||s,h=1;for(o=0;o<t.length;o++)t[o]&&(t[o].value||0===t[o].value)&&(n||t.sort(function(t,e){return t.value-e.value}).reverse(),n||(l=v?v(t[o].x):t[o].x,n="<table class='"+u.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='3'>Game "+l+"</th></tr>":"")),i=m(t[o].name),r=g(t[o].value,t[o].ratio,t[o].id,t[o].index),c=u.levelColor?u.levelColor(t[o].value):a(t[o].id),n+="<tr class='"+u.CLASS.tooltipName+"-"+t[o].id+"'>",n+="<td class='no'>#"+h+++"</td>",n+="<td class='name'><span style='background-color:"+c+"'></span>"+i+"</td>",n+="<td class='value'>"+r+"</td>",n+="</tr>");return n+"</table>"}},color:{pattern:["#016F4A","#00539B","#C5B358","#E51837","#F37737"]},legend:{show:!1}});d3.select(".pmcontainer").insert("div",".plusminus").attr("class","legend").selectAll("span").data([plusminusBenn[0],plusminusTavares[0],plusminusCrosby[0],plusminusOvechkin[0],plusminusVoracek[0]]).enter().append("span").attr("data-id",function(t){return t}).html(function(t){return t}).each(function(t){d3.select(this).style("background-color",l.color(t))}).on("mouseover",function(t){l.focus(t)}).on("mouseout",function(t){l.revert()}).on("click",function(t){l.toggle(t)});var m=c3.generate({bindto:"#shotsgoals",size:{height:400},data:{x:"gameno",columns:[gamesNHL,goalsBenn,goalsTavares,goalsCrosby,goalsOvechkin,goalsVoracek],type:"area-spline",types:{shotsBenn:"line",shotsTavares:"line",shotsCrosby:"line",shotsOvechkin:"line",shotsVoracek:"line",goalsBenn:"bar",goalsTavares:"bar",goalsCrosby:"bar",goalsOvechkin:"bar",goalsVoracek:"bar"},groups:[[goalsBenn[0],goalsTavares[0],goalsCrosby[0],goalsOvechkin[0],goalsVoracek[0]]],format:{format:function(t){return t}}},axis:{x:{type:"categories",label:{text:"Games",position:"outer-center"}},y:{label:{text:"Shots + Goals",position:"outer-middle"}}},grid:{x:{lines:[{value:11,text:"November"},{value:25,text:"December"},{value:38,text:"January"},{value:50,text:"February"},{value:62,text:"March"},{value:77,text:"April"}]}},tooltip:{contents:function(t,e,s,a){var n,o,l,r,i,c,u=this,p=u.config,v=p.tooltip_format_title||e,m=p.tooltip_format_name||function(t){return t},g=p.tooltip_format_value||s,h=1;for(o=0;o<t.length;o++)t[o]&&(t[o].value||0===t[o].value)&&(n||t.sort(function(t,e){return t.value-e.value}).reverse(),n||(l=v?v(t[o].x):t[o].x,n="<table class='"+u.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='3'>Game "+l+"</th></tr>":"")),i=m(t[o].name),r=g(t[o].value,t[o].ratio,t[o].id,t[o].index),c=u.levelColor?u.levelColor(t[o].value):a(t[o].id),n+="<tr class='"+u.CLASS.tooltipName+"-"+t[o].id+"'>",n+="<td class='no'>#"+h+++"</td>",n+="<td class='name'><span style='background-color:"+c+"'></span>"+i+"</td>",n+="<td class='value'>"+r+"</td>",n+="</tr>");return n+"</table>"}},color:{pattern:["#016F4A","#00539B","#C5B358","#E51837","#F37737"]},point:{show:!1},legend:{show:!1}});setTimeout(function(){m.load({columns:[shotsBenn,shotsTavares,shotsCrosby,shotsOvechkin,shotsVoracek],color:{pattern:["#016F4A","#00539B","#C5B358","#E51837","#F37737"]},type:"line"})},1500),d3.select(".svgcontainer").insert("div",".shotsgoals").attr("class","legend").selectAll("span").data([goalsBenn[0],goalsTavares[0],goalsCrosby[0],goalsOvechkin[0],goalsVoracek[0]]).enter().append("span").attr("data-id",function(t){return t}).html(function(t){return t}).each(function(t){d3.select(this).style("background-color",m.color(t))}).on("mouseover",function(t){m.focus(t)}).on("mouseout",function(t){m.revert()}).on("click",function(t){m.toggle(t)})});